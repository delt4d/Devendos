@inherits LayoutComponentBase
@inject NavigationManager Navigation

<MudThemeProvider />
<MudSnackbarProvider />
<MudPopoverProvider />
<MudDialogProvider
    Position="DialogPosition.Center"
    FullWidth="false"
    CloseButton="false"
    BackdropClick="false"
    CloseOnEscapeKey="true" />

<CurrentTabBehavior 
    CurrentTab="_currentTab" 
    OnTabChanged="OnTabChanged" />

<MudLayout Class="d-flex flex-column" Style="height: 100vh;">
    <MudMainContent Class="flex-grow-1 flex-shrink-1 overflow-y-auto">
        <MudContainer MaxWidth="MaxWidth.Medium" Class="pb-4">
            @Body
        </MudContainer>
    </MudMainContent>

    <MudTabs Centered="true" @bind-ActivePanelIndex="_currentTab" MinimumTabWidth="122px">
        <MudTabPanel 
            Text="Home"
            OnClick="() => Navigation.NavigateTo(HomeRoute)"
        />
        <MudTabPanel 
            Text="Contatos" 
            OnClick="() => Navigation.NavigateTo(ContactsRoute)"
        />
        <MudTabPanel 
            Text="Lembretes" 
            OnClick="() => Navigation.NavigateTo(RemindersRoute)"
        />
    </MudTabs>
</MudLayout>

@code {
    private int _currentTab;
    private const string HomeRoute = "/home";
    private const string ContactsRoute = "/contacts";
    private const string RemindersRoute = "/reminders";

    public void OnTabChanged(int tabIndex)
    {
        _currentTab = tabIndex;
        StateHasChanged();
    }
}